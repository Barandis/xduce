<nav>
  <ul>
    <li><a href="#manual/theory/conclusion" title="Putting it all together"><span class="fa fa-caret-left"></span></a></li>
    <li><a href="#manual/main" title="Table of contents"><span class="fa fa-caret-up"></span></a></li>
    <li><a href="#manual/setup/amd" title="AMD setup"><span class="fa fa-caret-right"></a></li>
  </ul>
</nav>

<section id="intro">
  <h1>CommonJS setup</h1>
  <p>
    CommonJS is the module system most notably used by <a href="https://nodejs.org/en/">Node.js</a>. Therefore it is the way you will want to go if you're developing server-side JavaScript applications with Node.js. It's also the module system used by <a href="http://browserify.org/">Browserify</a> and <a href="https://webpack.github.io/">Webpack</a>, which in many ways emulate a Node.js or ES2015 environment within the browser.
  </p>
  <p>
    If you're planning on using xduce with any of these technologies, this is the setup page for you.
  </p>
</section>

<section id="installation">
  <h2>Installation</h2>
  <p>
    Installation is a snap. If you're using <abbr title="Node Package Manager">npm</abbr>, open a terminal window in your project's main directory (the one with <code>package.json</code> in it) and type
  </p>
  <pre><code class="bash">
    npm install --save xduce
  </code></pre>
  <p>
    If you're using <a href="https://yarnpkg.com/en/">Yarn</a>, the process is similar. Open a terminal window in your project's main directory and type
  </p>
  <pre><code class="bash">
    yarn add xduce
  </code></pre>
  <p>
    Give it a few seconds to finish, and you're ready.
  </p>
</section>

<section id="usage">
  <h2>Usage</h2>
  <p>
    All of xduce's functionality is available from the base object that is imported/required from the module. To use it with plain CommonJS, just require the object and use it the way you would use any other object. (As shown below, the transducers are actually available from the <code>transducers</code> object that is a property of the main object; see the <a href="api/index.html">API documentation</a> for details about where to find what.)
  </p>
  <pre><code class="javascript">
    const xduce = require('xduce');
    const map = xduce.transducers.map;

    map([1, 2, 3, 4, 5], x => x + 1);
    // -> [2, 3, 4, 5, 6]
  </code></pre>
  <p>
    If you're using a transpiler (like <a href="https://babeljs.io/">Babel</a>) to turn ES2015 modules into CommonJS modules, you can do a very similar thing except with <code>import</code> statements.
  </p>
  <pre><code class="javascript">
    import xduce from 'xduce';
    const map = xduce.transducers.map;

    map([1, 2, 3, 4, 5], x => x + 1);
    // -> [2, 3, 4, 5, 6]
  </code></pre>
</section>

<section id="es2015">
  <h2>Transpiled ES5</h2>
  <p>
    Xduce is written in ES2015 (using <code>require</code> statements instead of <code>import</code> statements). The usages shown above access that ES2015 code. This works fine if you're doing things on the server side. However, if your intention is to use xduce in the browser as a CommonJS module, you need to choose one of a couple of options.
  </p>
  <p>
    One is to use the ES2015 code just as illustrated on this page. This code will work in any modern browser, but it will not work in some less-than-modern browsers that are still in use (like Internet Explorer 11). You can accept that, or you can use a transpiler to turn your code (and xduce) into ES5 code suitable for use in old browsers. If you do this, make sure that your transpiler is set up to include xduce. Instructions for configuring Babel, for instance, often include skipping any code that's in <code>node_modules</code>, where xduce will be living in this case.
  </p>
  <p>
    The second option is to use the pre-transpiled code in the <code>dist</code> directory of the xduce distribution. This code was put here so that people could inject it directly into their webpages through <code>&lt;script&gt;</code> tags, but it is still set up with a CommonJS option and will work fine in that environment. You just have to change the <code>import</code> or <code>require</code> statements.
  </p>
  <pre><code class="javascript">
    const xduce = require('xduce/dist/xduce');
    // OR
    import xduce from 'xduce/dist/xduce';
  </code></pre>
</section>

<nav>
  <ul>
    <li><a href="#manual/theory/conclusion" title="Putting it all together"><span class="fa fa-caret-left"></span></a></li>
    <li><a href="#manual/main" title="Table of contents"><span class="fa fa-caret-up"></span></a></li>
    <li><a href="#manual/setup/amd" title="AMD setup"><span class="fa fa-caret-right"></a></li>
  </ul>
</nav>
